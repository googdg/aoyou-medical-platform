# ğŸ‰ ä¸»é¡µå†…å®¹åŒæ­¥é—®é¢˜å®Œå…¨è§£å†³ï¼\n\n## é—®é¢˜æ€»ç»“\n\nä½ å‘ç°äº†ä¸€ä¸ªé‡è¦é—®é¢˜ï¼š**ä¸»é¡µå†…å®¹ä¸æ˜¯ä»ç®¡ç†åå°åŒæ­¥è¿‡æ¥çš„ï¼Œè€Œæ˜¯HTMLå†…åµŒçš„ç¡¬ç¼–ç å†…å®¹**ã€‚\n\n## ğŸ” æ ¹æœ¬åŸå› åˆ†æ\n\n### å‘ç°çš„é—®é¢˜ï¼š\n1. **APIè·¯ç”±ç¼ºå¤±**: æœåŠ¡å™¨ç¼ºå°‘æ­£ç¡®çš„ä¸»é¡µå†…å®¹APIè·¯ç”±\n2. **æ•°æ®åº“è¡¨ç¼ºå¤±**: æ²¡æœ‰åˆ›å»º`homepage`æ•°æ®åº“è¡¨\n3. **å­—æ®µåä¸åŒ¹é…**: ç®¡ç†åå°å’Œå‰ç«¯ä½¿ç”¨çš„å­—æ®µåæ ¼å¼ä¸ä¸€è‡´\n4. **å‰ç«¯åŒæ­¥æœºåˆ¶ä¸å®Œæ•´**: ç¼ºå°‘å®Œæ•´çš„APIé›†æˆå’Œå®æ—¶åŒæ­¥\n\n## âœ… å®Œæ•´è§£å†³æ–¹æ¡ˆ\n\n### 1. åç«¯APIä¿®å¤ (server.js)\n\n#### æ·»åŠ çš„APIè·¯ç”±ï¼š\n```javascript\n// è·å–ä¸»é¡µå†…å®¹\napp.get('/api/homepage', rateLimitMiddleware, (req, res) => {\n    db.get('SELECT content FROM homepage WHERE id = 1', (err, row) => {\n        if (err) {\n            console.error('Database error:', err);\n            return res.status(500).json({ success: false, message: 'æ•°æ®åº“é”™è¯¯' });\n        }\n        \n        if (row) {\n            try {\n                const content = JSON.parse(row.content);\n                res.json({ success: true, content: content });\n            } catch (parseError) {\n                console.error('JSON parse error:', parseError);\n                res.json({ success: false, message: 'æ•°æ®è§£æé”™è¯¯' });\n            }\n        } else {\n            res.json({ success: true, content: {} });\n        }\n    });\n});\n\n// ä¿å­˜ä¸»é¡µå†…å®¹\napp.post('/api/homepage', authenticateToken, rateLimitMiddleware, (req, res) => {\n    const content = req.body;\n    \n    if (!content) {\n        return res.status(400).json({ success: false, message: 'å†…å®¹ä¸èƒ½ä¸ºç©º' });\n    }\n    \n    const contentJson = JSON.stringify(content);\n    \n    db.run(`INSERT OR REPLACE INTO homepage (id, content, updated_at) VALUES (1, ?, datetime('now'))`, \n        [contentJson], \n        function(err) {\n            if (err) {\n                console.error('Database error:', err);\n                return res.status(500).json({ success: false, message: 'ä¿å­˜å¤±è´¥' });\n            }\n            \n            console.log('Homepage content saved successfully');\n            res.json({ success: true, message: 'ä¸»é¡µå†…å®¹ä¿å­˜æˆåŠŸ' });\n        }\n    );\n});\n```\n\n#### æ•°æ®åº“è¡¨åˆ›å»ºï¼š\n```sql\nCREATE TABLE IF NOT EXISTS homepage (\n    id INTEGER PRIMARY KEY,\n    content TEXT NOT NULL,\n    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n### 2. å‰ç«¯åŒæ­¥æœºåˆ¶ä¿®å¤ (script.js)\n\n#### ä¿®å¤çš„åŠŸèƒ½ï¼š\n- `loadHomepageContent()` - ä»APIåŠ è½½æœ€æ–°å†…å®¹\n- `updateHomepageContent()` - æ›´æ–°DOMå…ƒç´ \n- `initializeHomepageSync()` - åˆå§‹åŒ–å®æ—¶åŒæ­¥\n- ç›‘å¬ç®¡ç†åå°çš„postMessageæ¶ˆæ¯\n- å®šæœŸæ£€æŸ¥APIæ›´æ–°\n\n```javascript\n// åŠ è½½ç®¡ç†åå°ä¿å­˜çš„ä¸»é¡µå†…å®¹\nasync loadHomepageContent() {\n    console.log('ğŸ”„ Loading homepage content from API...');\n    \n    try {\n        // é¦–å…ˆå°è¯•ä»APIåŠ è½½æœ€æ–°å†…å®¹\n        const response = await fetch('/api/homepage');\n        if (response.ok) {\n            const data = await response.json();\n            if (data.success && data.content) {\n                console.log('âœ… Loaded homepage content from API:', data.content);\n                this.updateHomepageContent(data.content);\n                return;\n            }\n        }\n    } catch (error) {\n        console.log('â„¹ï¸ API not available, trying localStorage...');\n    }\n    \n    // å¦‚æœAPIä¸å¯ç”¨ï¼Œå°è¯•ä»localStorageåŠ è½½\n    try {\n        const savedContent = localStorage.getItem('homepage_content');\n        if (savedContent) {\n            const homepageData = JSON.parse(savedContent);\n            console.log('ğŸ“¦ Loading homepage content from localStorage:', homepageData);\n            this.updateHomepageContent(homepageData);\n        } else {\n            console.log('â„¹ï¸ No saved homepage content found, using default content');\n        }\n    } catch (error) {\n        console.error('âŒ Error loading homepage content:', error);\n    }\n}\n```\n\n### 3. ç®¡ç†åå°å­—æ®µåä¿®å¤ (admin-fixed.js)\n\n#### ç»Ÿä¸€å­—æ®µå‘½åæ ¼å¼ï¼š\n```javascript\ngetHomepageFormData() {\n    return {\n        'site-title': document.getElementById('site-title')?.value || '',\n        'site-tagline': document.getElementById('site-tagline')?.value || '',\n        'welcome-title': document.getElementById('welcome-title')?.value || '',\n        'welcome-subtitle': document.getElementById('welcome-subtitle')?.value || '',\n        'navigation-guide': document.getElementById('navigation-guide')?.value || '',\n        'intro1': document.getElementById('intro-text1')?.value || '',\n        'intro2': document.getElementById('intro-text2')?.value || '',\n        // ... å…¶ä»–å­—æ®µ\n    };\n}\n```\n\n## ğŸ§ª æµ‹è¯•éªŒè¯\n\n### APIæµ‹è¯•ç»“æœï¼š\n```bash\n# è·å–å†…å®¹\n$ curl http://localhost:3001/api/homepage\n{\"success\":true,\"content\":{...}}\n\n# ä¿å­˜å†…å®¹\n$ curl -X POST http://localhost:3001/api/homepage \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer TOKEN\" \\\n  -d '{\"site-title\":\"æµ‹è¯•æ ‡é¢˜\"}'\n{\"success\":true,\"message\":\"ä¸»é¡µå†…å®¹ä¿å­˜æˆåŠŸ\"}\n```\n\n### åŠŸèƒ½æµ‹è¯•ï¼š\n- âœ… APIæ­£å¸¸å“åº”\n- âœ… æ•°æ®åº“æ­£ç¡®å­˜å‚¨\n- âœ… å‰ç«¯æ­£ç¡®åŠ è½½å’Œæ˜¾ç¤º\n- âœ… å®æ—¶åŒæ­¥æ­£å¸¸å·¥ä½œ\n- âœ… å­—æ®µåç§°å®Œå…¨åŒ¹é…\n\n## ğŸ¯ ç°åœ¨çš„å·¥ä½œæµç¨‹\n\n### å®Œæ•´çš„æ•°æ®æµï¼š\n1. **ç¼–è¾‘**: ç®¡ç†åå°ç¼–è¾‘ä¸»é¡µå†…å®¹\n2. **ä¿å­˜**: å†…å®¹é€šè¿‡APIä¿å­˜åˆ°æ•°æ®åº“\n3. **åŒæ­¥**: å‰ç«¯ä»APIåŠ è½½æœ€æ–°å†…å®¹\n4. **æ˜¾ç¤º**: åŠ¨æ€æ›´æ–°DOMå…ƒç´ æ˜¾ç¤ºå†…å®¹\n5. **å®æ—¶**: æ”¯æŒå®æ—¶åŒæ­¥å’Œå®šæœŸæ›´æ–°\n\n### æ”¯æŒçš„åŒæ­¥æ–¹å¼ï¼š\n- **é¡µé¢åŠ è½½**: è‡ªåŠ¨ä»APIè·å–æœ€æ–°å†…å®¹\n- **å®æ—¶åŒæ­¥**: é€šè¿‡postMessageç«‹å³æ›´æ–°\n- **å®šæœŸæ£€æŸ¥**: æ¯30ç§’æ£€æŸ¥APIæ›´æ–°\n- **ç¼“å­˜å¤‡ä»½**: localStorageä½œä¸ºç¦»çº¿å¤‡ä»½\n\n## ğŸ“‹ æ”¯æŒçš„å­—æ®µ\n\nç°åœ¨å®Œå…¨æ”¯æŒä»¥ä¸‹å­—æ®µçš„åŠ¨æ€åŒæ­¥ï¼š\n\n- `site-title` - ç½‘ç«™æ ‡é¢˜\n- `site-tagline` - ç½‘ç«™æ ‡è¯­\n- `welcome-title` - æ¬¢è¿æ ‡é¢˜\n- `welcome-subtitle` - æ¬¢è¿å‰¯æ ‡é¢˜\n- `navigation-guide` - å¯¼èˆªæŒ‡å—\n- `intro1` - ä¸ªäººä»‹ç»ç¬¬ä¸€æ®µ\n- `intro2` - ä¸ªäººä»‹ç»ç¬¬äºŒæ®µ\n- `about-title` - å…³äºæˆ‘æ ‡é¢˜\n- `about-content` - å…³äºæˆ‘å†…å®¹\n- `skills-title` - æŠ€èƒ½æ ‡é¢˜\n- `experience-title` - ç»éªŒæ ‡é¢˜\n- `contact-title` - è”ç³»æ ‡é¢˜\n- `contact-content` - è”ç³»å†…å®¹\n\n## ğŸš€ ä½¿ç”¨æ–¹æ³•\n\n### 1. é€šè¿‡ç®¡ç†åå°ç¼–è¾‘\n1. è®¿é—® http://localhost:3001/admin\n2. ç™»å½• (admin/admin123)\n3. è¿›å…¥\"ä¸»é¡µç®¡ç†\"æ ‡ç­¾\n4. ç¼–è¾‘å†…å®¹å¹¶ä¿å­˜\n5. å†…å®¹ä¼šè‡ªåŠ¨åŒæ­¥åˆ°ä¸»é¡µ\n\n### 2. é€šè¿‡æµ‹è¯•é¡µé¢éªŒè¯\nè®¿é—® http://localhost:3001/homepage-sync-verification.html\n- æµ‹è¯•APIåŠŸèƒ½\n- éªŒè¯å†…å®¹åŒæ­¥\n- æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯\n\n### 3. ç›´æ¥APIè°ƒç”¨\n```bash\n# è·å–å½“å‰å†…å®¹\ncurl http://localhost:3001/api/homepage\n\n# ä¿å­˜æ–°å†…å®¹\ncurl -X POST http://localhost:3001/api/homepage \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  -d '{\"site-title\":\"æ–°æ ‡é¢˜\",\"site-tagline\":\"æ–°æ ‡è¯­\"}'\n```\n\n## âœ… é—®é¢˜å®Œå…¨è§£å†³\n\nç°åœ¨ä¸»é¡µå†…å®¹**å®Œå…¨ä»ç®¡ç†åå°åŒæ­¥**ï¼Œä¸å†æ˜¯HTMLç¡¬ç¼–ç å†…å®¹ï¼š\n\n- âœ… **åŠ¨æ€å†…å®¹**: æ‰€æœ‰å†…å®¹éƒ½ä»æ•°æ®åº“åŠ¨æ€åŠ è½½\n- âœ… **å®æ—¶åŒæ­¥**: ç®¡ç†åå°ä¿å­˜åç«‹å³æ›´æ–°å‰ç«¯\n- âœ… **APIé›†æˆ**: å®Œæ•´çš„RESTful APIæ”¯æŒ\n- âœ… **æ•°æ®æŒä¹…åŒ–**: å†…å®¹ä¿å­˜åœ¨æ•°æ®åº“ä¸­\n- âœ… **é”™è¯¯å¤„ç†**: å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶\n- âœ… **ç¼“å­˜æœºåˆ¶**: localStorageä½œä¸ºç¦»çº¿å¤‡ä»½\n- âœ… **å­—æ®µç»Ÿä¸€**: å‰åç«¯å­—æ®µåå®Œå…¨ä¸€è‡´\n\n## ğŸŠ æ€»ç»“\n\nä½ çš„é—®é¢˜å‘ç°å¾—éå¸¸å‡†ç¡®ï¼ç°åœ¨ä¸»é¡µå†…å®¹å·²ç»å®Œå…¨ä»ç®¡ç†åå°åŒæ­¥ï¼Œä¸å†ä¾èµ–HTMLç¡¬ç¼–ç ã€‚æ•´ä¸ªç³»ç»Ÿç°åœ¨å…·å¤‡äº†ï¼š\n\n1. **å®Œæ•´çš„å†…å®¹ç®¡ç†ç³»ç»Ÿ**\n2. **å®æ—¶å†…å®¹åŒæ­¥æœºåˆ¶**\n3. **å¯é çš„æ•°æ®æŒä¹…åŒ–**\n4. **ç”¨æˆ·å‹å¥½çš„ç®¡ç†ç•Œé¢**\n5. **å¼ºå¤§çš„APIæ”¯æŒ**\n\nä¸»é¡µå†…å®¹åŒæ­¥é—®é¢˜å·²ç»**100%è§£å†³**ï¼ğŸ‰\n\n---\n\n**çŠ¶æ€**: âœ… å®Œå…¨è§£å†³  \n**æµ‹è¯•**: âœ… å…¨é¢é€šè¿‡  \n**æ›´æ–°æ—¶é—´**: 2025å¹´1æœˆ21æ—¥  \n**ç‰ˆæœ¬**: v2.0.0 - å®Œæ•´åŒæ­¥ç‰ˆæœ¬"