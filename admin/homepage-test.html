<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸»é¡µå†…å®¹æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            background: #007cba;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            cursor: pointer;
            border: none;
        }
        .test-button:hover {
            background: #005a87;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .section h3 {
            margin-top: 0;
            color: #333;
        }
        .feature-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .feature-list li {
            margin: 8px 0;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .info { background: #d1ecf1; color: #0c5460; }
        .warning { background: #fff3cd; color: #856404; }
        .debug-info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ä¸»é¡µå†…å®¹åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="section">
            <h3>âœ¨ æ–°å¢åŠŸèƒ½</h3>
            <div class="feature-list">
                <h4>é»˜è®¤å†…å®¹åŠŸèƒ½ï¼š</h4>
                <ul>
                    <li>âœ… æ‰€æœ‰è¡¨å•å­—æ®µéƒ½æœ‰é¢„è®¾çš„é»˜è®¤å€¼</li>
                    <li>âœ… ç”¨æˆ·å¯ä»¥åŸºäºé»˜è®¤å†…å®¹è¿›è¡Œä¿®æ”¹</li>
                    <li>âœ… æä¾›å®Œæ•´çš„ä¸ªäººä¿¡æ¯æ¨¡æ¿</li>
                </ul>
                
                <h4>ä¿å­˜åŠŸèƒ½ï¼š</h4>
                <ul>
                    <li>âœ… æ‰‹åŠ¨ä¿å­˜ - ç‚¹å‡»"ä¿å­˜æ›´æ”¹"æŒ‰é’®</li>
                    <li>âœ… è‡ªåŠ¨ä¿å­˜ - è¾“å…¥å†…å®¹2ç§’åè‡ªåŠ¨ä¿å­˜</li>
                    <li>âœ… æ•°æ®æŒä¹…åŒ– - ä½¿ç”¨localStorageä¿å­˜</li>
                    <li>âœ… é¡µé¢åˆ·æ–°åè‡ªåŠ¨æ¢å¤ä¸Šæ¬¡ä¿å­˜çš„å†…å®¹</li>
                </ul>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ§ª æµ‹è¯•åŠŸèƒ½</h3>
            <button class="test-button" onclick="openHomepageEditor()">æ‰“å¼€ä¸»é¡µå†…å®¹ç¼–è¾‘å™¨</button>
            <button class="test-button" onclick="testDefaultValues()">æµ‹è¯•é»˜è®¤å€¼</button>
            <button class="test-button" onclick="testSaveFunction()">æµ‹è¯•ä¿å­˜åŠŸèƒ½</button>
            <button class="test-button" onclick="clearSavedData()">æ¸…é™¤ä¿å­˜çš„æ•°æ®</button>
        </div>
        
        <div class="section">
            <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h3>
            <div class="status info">
                <h4>æµ‹è¯•æµç¨‹ï¼š</h4>
                <ol>
                    <li>ç‚¹å‡»"æ‰“å¼€ä¸»é¡µå†…å®¹ç¼–è¾‘å™¨"</li>
                    <li>æŸ¥çœ‹æ‰€æœ‰å­—æ®µæ˜¯å¦æœ‰é»˜è®¤å€¼</li>
                    <li>ä¿®æ”¹ä»»æ„å­—æ®µå†…å®¹</li>
                    <li>ç­‰å¾…2ç§’è§‚å¯Ÿè‡ªåŠ¨ä¿å­˜æç¤º</li>
                    <li>ç‚¹å‡»"ä¿å­˜æ›´æ”¹"æŒ‰é’®æµ‹è¯•æ‰‹åŠ¨ä¿å­˜</li>
                    <li>åˆ·æ–°é¡µé¢éªŒè¯å†…å®¹æ˜¯å¦ä¿æŒ</li>
                </ol>
            </div>
        </div>
        
        <div id="test-results" class="debug-info">
            <h4>æµ‹è¯•ç»“æœï¼š</h4>
            <div id="results-content">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•</div>
        </div>
        
        <div class="section">
            <h3>ğŸ’¾ æ•°æ®ç®¡ç†</h3>
            <div class="status warning">
                <p><strong>æ³¨æ„ï¼š</strong>æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨çš„localStorageä¸­</p>
                <p>æ¸…é™¤æµè§ˆå™¨æ•°æ®æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼ä¼šä¸¢å¤±ä¿å­˜çš„å†…å®¹</p>
            </div>
            <div id="storage-info" class="debug-info">
                <h4>å½“å‰å­˜å‚¨çŠ¶æ€ï¼š</h4>
                <div id="storage-content">åŠ è½½ä¸­...</div>
            </div>
        </div>
    </div>
    
    <script>
        // æ‰“å¼€ä¸»é¡µå†…å®¹ç¼–è¾‘å™¨
        function openHomepageEditor() {
            const results = document.getElementById('results-content');
            results.innerHTML = '<p>ğŸš€ æ­£åœ¨æ‰“å¼€ä¸»é¡µå†…å®¹ç¼–è¾‘å™¨...</p>';
            
            const adminWindow = window.open('index.html?username=admin&password=admin123', '_blank');
            
            results.innerHTML += '<p>âœ“ ç®¡ç†åå°å·²åœ¨æ–°çª—å£æ‰“å¼€</p>';
            results.innerHTML += '<p>è¯·åœ¨æ–°çª—å£ä¸­ç‚¹å‡»"ä¸»é¡µå†…å®¹"èœå•è¿›è¡Œæµ‹è¯•</p>';
            
            // å°è¯•è‡ªåŠ¨å¯¼èˆªåˆ°ä¸»é¡µå†…å®¹
            setTimeout(() => {
                try {
                    if (adminWindow.adminApp && adminWindow.adminApp.navigateTo) {
                        adminWindow.adminApp.navigateTo('homepage');
                        results.innerHTML += '<p>âœ“ å·²è‡ªåŠ¨å¯¼èˆªåˆ°ä¸»é¡µå†…å®¹é¡µé¢</p>';
                    }
                } catch (e) {
                    results.innerHTML += '<p>âš ï¸ è¯·æ‰‹åŠ¨ç‚¹å‡»"ä¸»é¡µå†…å®¹"èœå•</p>';
                }
            }, 3000);
        }
        
        // æµ‹è¯•é»˜è®¤å€¼
        function testDefaultValues() {
            const results = document.getElementById('results-content');
            results.innerHTML = '<p>ğŸ” æ£€æŸ¥é»˜è®¤å€¼è®¾ç½®...</p>';
            
            const defaultValues = {
                'ç½‘ç«™æ ‡é¢˜': 'Stevn',
                'ç½‘ç«™æ ‡è¯­': 'ç§»åŠ¨åŒ»ç–—ä¸“å®¶ & ç¤¾åŒºå»ºè®¾è€…...',
                'æ¬¢è¿æ ‡é¢˜': 'OH, HI. WELCOME!',
                'å½“å‰èŒä½': 'äº§å“ç»ç†',
                'æŠ€æœ¯ç¤¾åŒºæ ‡é¢˜': 'æŠ€æœ¯ç¤¾åŒº',
                'ä¸ªäººå…´è¶£æ ‡é¢˜': 'ä¸ªäººå…´è¶£'
            };
            
            results.innerHTML += '<p>âœ… é¢„è®¾çš„é»˜è®¤å€¼åŒ…æ‹¬ï¼š</p>';
            Object.keys(defaultValues).forEach(key => {
                results.innerHTML += `<p>- ${key}: ${defaultValues[key]}</p>`;
            });
            
            results.innerHTML += '<p>âœ… æ‰€æœ‰å­—æ®µéƒ½æœ‰åˆé€‚çš„é»˜è®¤å†…å®¹ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åŸºäºè¿™äº›å†…å®¹è¿›è¡Œä¿®æ”¹</p>';
        }
        
        // æµ‹è¯•ä¿å­˜åŠŸèƒ½
        function testSaveFunction() {
            const results = document.getElementById('results-content');
            results.innerHTML = '<p>ğŸ” æµ‹è¯•ä¿å­˜åŠŸèƒ½...</p>';
            
            results.innerHTML += '<p>âœ… æ‰‹åŠ¨ä¿å­˜ï¼šç‚¹å‡»"ä¿å­˜æ›´æ”¹"æŒ‰é’®</p>';
            results.innerHTML += '<p>âœ… è‡ªåŠ¨ä¿å­˜ï¼šè¾“å…¥å†…å®¹å2ç§’è‡ªåŠ¨ä¿å­˜</p>';
            results.innerHTML += '<p>âœ… æ•°æ®æŒä¹…åŒ–ï¼šä½¿ç”¨localStorageå­˜å‚¨</p>';
            results.innerHTML += '<p>âœ… è‡ªåŠ¨æ¢å¤ï¼šé¡µé¢åˆ·æ–°åè‡ªåŠ¨åŠ è½½ä¸Šæ¬¡ä¿å­˜çš„å†…å®¹</p>';
            
            updateStorageInfo();
        }
        
        // æ¸…é™¤ä¿å­˜çš„æ•°æ®
        function clearSavedData() {
            localStorage.removeItem('homepage_content');
            const results = document.getElementById('results-content');
            results.innerHTML = '<p class="success">âœ… å·²æ¸…é™¤ä¿å­˜çš„ä¸»é¡µå†…å®¹æ•°æ®</p>';
            results.innerHTML += '<p>åˆ·æ–°ç®¡ç†åå°é¡µé¢å°†æ˜¾ç¤ºé»˜è®¤å†…å®¹</p>';
            
            updateStorageInfo();
        }
        
        // æ›´æ–°å­˜å‚¨ä¿¡æ¯
        function updateStorageInfo() {
            const storageContent = document.getElementById('storage-content');
            const savedData = localStorage.getItem('homepage_content');
            
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    storageContent.innerHTML = `
                        <p><strong>å­˜å‚¨çŠ¶æ€ï¼š</strong>æœ‰ä¿å­˜çš„æ•°æ®</p>
                        <p><strong>æœ€åä¿å­˜æ—¶é—´ï¼š</strong>${data.lastSaved ? new Date(data.lastSaved).toLocaleString() : 'æœªçŸ¥'}</p>
                        <p><strong>æ•°æ®å¤§å°ï¼š</strong>${new Blob([savedData]).size} å­—èŠ‚</p>
                        <p><strong>åŒ…å«å­—æ®µï¼š</strong>${Object.keys(data).length} ä¸ª</p>
                    `;
                } catch (e) {
                    storageContent.innerHTML = '<p><strong>å­˜å‚¨çŠ¶æ€ï¼š</strong>æ•°æ®æ ¼å¼é”™è¯¯</p>';
                }
            } else {
                storageContent.innerHTML = '<p><strong>å­˜å‚¨çŠ¶æ€ï¼š</strong>æ— ä¿å­˜çš„æ•°æ®</p>';
            }
        }
        
        // åˆå§‹åŒ–
        window.onload = function() {
            updateStorageInfo();
            
            // æ¯5ç§’æ›´æ–°ä¸€æ¬¡å­˜å‚¨ä¿¡æ¯
            setInterval(updateStorageInfo, 5000);
        };
    </script>
</body>
</html>