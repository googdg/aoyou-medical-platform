<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ»å­¦åˆ†ç±»ç³»ç»Ÿæµ‹è¯•</title>
    <link rel="stylesheet" href="./css/aoyou-medical.css">
    <style>
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .category-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #2E86AB;
            transition: transform 0.3s ease;
        }
        .category-card:hover {
            transform: translateY(-2px);
        }
        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        .category-icon {
            font-size: 24px;
        }
        .category-name {
            font-size: 18px;
            font-weight: 600;
            color: #2E86AB;
        }
        .category-description {
            color: #666;
            margin-bottom: 16px;
            line-height: 1.5;
        }
        .category-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .stat-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        .stat-number {
            font-size: 20px;
            font-weight: bold;
            color: #2E86AB;
            margin-bottom: 4px;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
        }
        .test-actions {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .test-btn {
            padding: 10px 20px;
            background: #2E86AB;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        .test-btn:hover {
            background: #1E5F7F;
        }
        .test-btn.secondary {
            background: #6c757d;
        }
        .overview-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .overview-card {
            background: linear-gradient(135deg, #2E86AB, #5BA3C7);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        .overview-number {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .overview-label {
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>åŒ»å­¦åˆ†ç±»ç³»ç»Ÿæµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“Š å¹³å°æ¦‚è§ˆ</h2>
            <div id="overview-stats" class="overview-stats">
                <!-- æ¦‚è§ˆç»Ÿè®¡å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ¥ åŒ»å­¦åˆ†ç±»æ¿å—</h2>
            <p>å¹³å°å…±è®¾ç½®7ä¸ªåŒ»å­¦ä¸“ä¸šåˆ†ç±»ï¼Œæ¯ä¸ªåˆ†ç±»åŒ…å«ä¸åŒç±»å‹çš„ä¸“ä¸šè§†é¢‘å†…å®¹ï¼š</p>
            <div id="category-grid" class="category-grid">
                <!-- åˆ†ç±»å¡ç‰‡å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h2>
            <div class="test-actions">
                <button onclick="loadVideoData()" class="test-btn">åŠ è½½è§†é¢‘æ•°æ®</button>
                <button onclick="testCategoryFilter()" class="test-btn">æµ‹è¯•åˆ†ç±»ç­›é€‰</button>
                <button onclick="testCategoryStats()" class="test-btn">æµ‹è¯•ç»Ÿè®¡åŠŸèƒ½</button>
                <button onclick="testVideoGeneration()" class="test-btn">æµ‹è¯•è§†é¢‘ç”Ÿæˆ</button>
                <button onclick="exportCategoryData()" class="test-btn secondary">å¯¼å‡ºåˆ†ç±»æ•°æ®</button>
            </div>
            <div id="test-results" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; display: none;">
                <h4>æµ‹è¯•ç»“æœï¼š</h4>
                <div id="test-output"></div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸš€ æ‰“å¼€å®Œæ•´åº”ç”¨</h2>
            <p>æµ‹è¯•å®Œæˆåï¼Œæ‚¨å¯ä»¥æ‰“å¼€å®Œæ•´çš„åº”ç”¨æ¥ä½“éªŒåˆ†ç±»ç³»ç»Ÿï¼š</p>
            <a href="./aoyou-medical-platform.html" target="_blank" class="test-btn" style="display: inline-block; text-decoration: none; text-align: center;">
                æ‰“å¼€ Aoyou Digital åŒ»å­¦å­¦ä¹ å¹³å°
            </a>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ åˆ†ç±»ç³»ç»Ÿç‰¹æ€§</h2>
            <ul>
                <li><strong>7ä¸ªä¸“ä¸šåˆ†ç±»</strong>ï¼šåŸºç¡€åŒ»å­¦ã€ä¸´åºŠåŒ»å­¦ã€åŒ»å­¦å½±åƒã€è¯å­¦æ²»ç–—ã€å‰æ²¿æŠ€æœ¯ã€ä¼¦ç†æ³•è§„ã€ç»§ç»­æ•™è‚²</li>
                <li><strong>ä¸°å¯Œçš„è§†é¢‘ç±»å‹</strong>ï¼šæ¯ä¸ªåˆ†ç±»åŒ…å«å¤šç§å­ç±»å‹çš„ä¸“ä¸šè§†é¢‘å†…å®¹</li>
                <li><strong>æ™ºèƒ½æ ‡ç­¾ç³»ç»Ÿ</strong>ï¼šè§†é¢‘è‡ªåŠ¨æ ‡è®°éš¾åº¦ç­‰çº§ã€è®²å¸ˆä¿¡æ¯ã€è¯„åˆ†ç­‰</li>
                <li><strong>å®æ—¶ç»Ÿè®¡</strong>ï¼šæ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»çš„è§†é¢‘æ•°é‡å’Œæ€»æ—¶é•¿</li>
                <li><strong>åˆ†ç±»ä¿¡æ¯é¢æ¿</strong>ï¼šé•¿æŒ‰æˆ–æ‚¬åœæ˜¾ç¤ºåˆ†ç±»è¯¦ç»†ä¿¡æ¯</li>
                <li><strong>è§†è§‰æ ‡è¯†</strong>ï¼šæ¯ä¸ªåˆ†ç±»éƒ½æœ‰ç‹¬ç‰¹çš„å›¾æ ‡å’Œé¢œè‰²æ ‡è¯†</li>
            </ul>
        </div>
    </div>

    <script src="./js/aoyou-medical-app.js"></script>
    
    <script>
        let videoData = [];
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadVideoData();
        });
        
        function loadVideoData() {
            // åˆ›å»ºä¸´æ—¶åº”ç”¨å®ä¾‹æ¥ç”Ÿæˆè§†é¢‘æ•°æ®
            const tempApp = {
                generateMockVideoData: window.AoyouMedicalApp.prototype.generateMockVideoData,
                getVideoTypesByCategory: window.AoyouMedicalApp.prototype.getVideoTypesByCategory,
                getRandomDifficulty: window.AoyouMedicalApp.prototype.getRandomDifficulty,
                getRandomInstructor: window.AoyouMedicalApp.prototype.getRandomInstructor
            };
            
            videoData = tempApp.generateMockVideoData();
            
            updateOverviewStats();
            updateCategoryGrid();
            showTestResult('âœ… è§†é¢‘æ•°æ®åŠ è½½æˆåŠŸï¼Œå…±ç”Ÿæˆ ' + videoData.length + ' ä¸ªè§†é¢‘');
        }
        
        function updateOverviewStats() {
            const container = document.getElementById('overview-stats');
            
            const totalVideos = videoData.length;
            const totalDuration = videoData.reduce((sum, video) => sum + video.duration, 0);
            const totalViews = videoData.reduce((sum, video) => sum + video.viewCount, 0);
            const averageRating = videoData.length > 0 
                ? (videoData.reduce((sum, video) => sum + parseFloat(video.rating || 0), 0) / videoData.length).toFixed(1)
                : 0;
            
            container.innerHTML = `
                <div class="overview-card">
                    <div class="overview-number">${totalVideos}</div>
                    <div class="overview-label">æ€»è§†é¢‘æ•°</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number">${Math.round(totalDuration / 60)}</div>
                    <div class="overview-label">æ€»æ—¶é•¿(åˆ†é’Ÿ)</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number">${formatNumber(totalViews)}</div>
                    <div class="overview-label">æ€»è§‚çœ‹é‡</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number">${averageRating}</div>
                    <div class="overview-label">å¹³å‡è¯„åˆ†</div>
                </div>
            `;
        }
        
        function updateCategoryGrid() {
            const container = document.getElementById('category-grid');
            
            const categories = [
                { id: 'basic', name: 'åŸºç¡€åŒ»å­¦', icon: 'ğŸ“š', description: 'è§£å‰–å­¦ã€ç”Ÿç†å­¦ã€ç—…ç†å­¦ç­‰åŒ»å­¦åŸºç¡€çŸ¥è¯†', color: '#FF6B6B' },
                { id: 'clinical', name: 'ä¸´åºŠåŒ»å­¦', icon: 'ğŸ©º', description: 'å†…ç§‘ã€å¤–ç§‘ã€å¦‡äº§ç§‘ã€å„¿ç§‘ç­‰ä¸´åºŠå®è·µ', color: '#4ECDC4' },
                { id: 'imaging', name: 'åŒ»å­¦å½±åƒ', icon: 'ğŸ”¬', description: 'Xå…‰ã€CTã€MRIã€è¶…å£°ç­‰å½±åƒè¯Šæ–­æŠ€æœ¯', color: '#45B7D1' },
                { id: 'pharmacy', name: 'è¯å­¦æ²»ç–—', icon: 'ğŸ’Š', description: 'è¯ç†å­¦ã€ä¸´åºŠç”¨è¯ã€æ²»ç–—æ–¹æ¡ˆåˆ¶å®š', color: '#96CEB4' },
                { id: 'technology', name: 'å‰æ²¿æŠ€æœ¯', icon: 'ğŸ¤–', description: 'äººå·¥æ™ºèƒ½ã€ç²¾å‡†åŒ»å­¦ã€æ–°å…´åŒ»ç–—æŠ€æœ¯', color: '#FFEAA7' },
                { id: 'ethics', name: 'ä¼¦ç†æ³•è§„', icon: 'âš–ï¸', description: 'åŒ»ç–—æ³•è§„ã€ä¼¦ç†è§„èŒƒã€è´¨é‡ç®¡ç†', color: '#DDA0DD' },
                { id: 'education', name: 'ç»§ç»­æ•™è‚²', icon: 'ğŸ“', description: 'å­¦æœ¯ä¼šè®®ã€ä¸“å®¶è®²åº§ã€æŠ€èƒ½åŸ¹è®­', color: '#98D8C8' }
            ];
            
            container.innerHTML = categories.map(category => {
                const categoryVideos = videoData.filter(video => video.category === category.id);
                const totalDuration = categoryVideos.reduce((sum, video) => sum + video.duration, 0);
                const totalViews = categoryVideos.reduce((sum, video) => sum + video.viewCount, 0);
                const averageRating = categoryVideos.length > 0 
                    ? (categoryVideos.reduce((sum, video) => sum + parseFloat(video.rating || 0), 0) / categoryVideos.length).toFixed(1)
                    : 0;
                
                return `
                    <div class="category-card" style="border-left-color: ${category.color}">
                        <div class="category-header">
                            <div class="category-icon">${category.icon}</div>
                            <div class="category-name">${category.name}</div>
                        </div>
                        <div class="category-description">${category.description}</div>
                        <div class="category-stats">
                            <div class="stat-item">
                                <div class="stat-number">${categoryVideos.length}</div>
                                <div class="stat-label">è§†é¢‘æ•°é‡</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">${Math.round(totalDuration / 60)}</div>
                                <div class="stat-label">æ€»æ—¶é•¿(åˆ†é’Ÿ)</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">${formatNumber(totalViews)}</div>
                                <div class="stat-label">æ€»è§‚çœ‹é‡</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">${averageRating}</div>
                                <div class="stat-label">å¹³å‡è¯„åˆ†</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function testCategoryFilter() {
            const categories = ['basic', 'clinical', 'imaging', 'pharmacy', 'technology', 'ethics', 'education'];
            let results = '<h4>åˆ†ç±»ç­›é€‰æµ‹è¯•ç»“æœï¼š</h4><ul>';
            
            categories.forEach(category => {
                const filteredVideos = videoData.filter(video => video.category === category);
                const categoryName = getCategoryName(category);
                results += `<li><strong>${categoryName}</strong>: ${filteredVideos.length} ä¸ªè§†é¢‘</li>`;
            });
            
            results += '</ul>';
            showTestResult(results);
        }
        
        function testCategoryStats() {
            const stats = {};
            const categories = ['basic', 'clinical', 'imaging', 'pharmacy', 'technology', 'ethics', 'education'];
            
            categories.forEach(category => {
                const videos = videoData.filter(video => video.category === category);
                const totalDuration = videos.reduce((sum, video) => sum + video.duration, 0);
                const totalViews = videos.reduce((sum, video) => sum + video.viewCount, 0);
                
                stats[category] = {
                    videoCount: videos.length,
                    totalDuration: Math.round(totalDuration / 60),
                    totalViews: totalViews,
                    averageRating: videos.length > 0 
                        ? (videos.reduce((sum, video) => sum + parseFloat(video.rating || 0), 0) / videos.length).toFixed(1)
                        : 0
                };
            });
            
            let results = '<h4>åˆ†ç±»ç»Ÿè®¡æµ‹è¯•ç»“æœï¼š</h4>';
            results += '<table style="width: 100%; border-collapse: collapse; margin-top: 10px;">';
            results += '<tr style="background: #f8f9fa;"><th style="padding: 8px; border: 1px solid #ddd;">åˆ†ç±»</th><th style="padding: 8px; border: 1px solid #ddd;">è§†é¢‘æ•°</th><th style="padding: 8px; border: 1px solid #ddd;">æ—¶é•¿(åˆ†é’Ÿ)</th><th style="padding: 8px; border: 1px solid #ddd;">è§‚çœ‹é‡</th><th style="padding: 8px; border: 1px solid #ddd;">è¯„åˆ†</th></tr>';
            
            Object.keys(stats).forEach(category => {
                const stat = stats[category];
                const categoryName = getCategoryName(category);
                results += `<tr><td style="padding: 8px; border: 1px solid #ddd;">${categoryName}</td><td style="padding: 8px; border: 1px solid #ddd;">${stat.videoCount}</td><td style="padding: 8px; border: 1px solid #ddd;">${stat.totalDuration}</td><td style="padding: 8px; border: 1px solid #ddd;">${formatNumber(stat.totalViews)}</td><td style="padding: 8px; border: 1px solid #ddd;">${stat.averageRating}</td></tr>`;
            });
            
            results += '</table>';
            showTestResult(results);
        }
        
        function testVideoGeneration() {
            const difficultyCount = {};
            const instructorCount = {};
            
            videoData.forEach(video => {
                // ç»Ÿè®¡éš¾åº¦åˆ†å¸ƒ
                difficultyCount[video.difficulty] = (difficultyCount[video.difficulty] || 0) + 1;
                
                // ç»Ÿè®¡è®²å¸ˆåˆ†å¸ƒ
                if (video.instructor) {
                    instructorCount[video.instructor.name] = (instructorCount[video.instructor.name] || 0) + 1;
                }
            });
            
            let results = '<h4>è§†é¢‘ç”Ÿæˆæµ‹è¯•ç»“æœï¼š</h4>';
            results += '<p><strong>éš¾åº¦åˆ†å¸ƒï¼š</strong></p><ul>';
            Object.keys(difficultyCount).forEach(difficulty => {
                const difficultyNames = { 'beginner': 'å…¥é—¨', 'intermediate': 'è¿›é˜¶', 'advanced': 'é«˜çº§' };
                results += `<li>${difficultyNames[difficulty] || difficulty}: ${difficultyCount[difficulty]} ä¸ª</li>`;
            });
            results += '</ul>';
            
            results += '<p><strong>è®²å¸ˆåˆ†å¸ƒï¼š</strong></p><ul>';
            Object.keys(instructorCount).slice(0, 5).forEach(instructor => {
                results += `<li>${instructor}: ${instructorCount[instructor]} ä¸ªè§†é¢‘</li>`;
            });
            results += '</ul>';
            
            const newVideos = videoData.filter(video => video.isNew).length;
            const hotVideos = videoData.filter(video => video.isHot).length;
            const premiumVideos = videoData.filter(video => video.isPremium).length;
            
            results += `<p><strong>ç‰¹æ®Šæ ‡è®°ï¼š</strong> æ–°è§†é¢‘ ${newVideos} ä¸ªï¼Œçƒ­é—¨è§†é¢‘ ${hotVideos} ä¸ªï¼Œç²¾å“å†…å®¹ ${premiumVideos} ä¸ª</p>`;
            
            showTestResult(results);
        }
        
        function exportCategoryData() {
            const exportData = {
                totalVideos: videoData.length,
                categories: {},
                generatedAt: new Date().toISOString()
            };
            
            const categories = ['basic', 'clinical', 'imaging', 'pharmacy', 'technology', 'ethics', 'education'];
            
            categories.forEach(category => {
                const videos = videoData.filter(video => video.category === category);
                exportData.categories[category] = {
                    name: getCategoryName(category),
                    videoCount: videos.length,
                    totalDuration: videos.reduce((sum, video) => sum + video.duration, 0),
                    videos: videos.map(video => ({
                        id: video.id,
                        title: video.title,
                        duration: video.duration,
                        difficulty: video.difficulty,
                        rating: video.rating,
                        instructor: video.instructor?.name
                    }))
                };
            });
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = 'aoyou-category-data.json';
            link.click();
            
            showTestResult('âœ… åˆ†ç±»æ•°æ®å·²å¯¼å‡ºåˆ° aoyou-category-data.json æ–‡ä»¶');
        }
        
        function getCategoryName(categoryId) {
            const names = {
                'basic': 'åŸºç¡€åŒ»å­¦',
                'clinical': 'ä¸´åºŠåŒ»å­¦',
                'imaging': 'åŒ»å­¦å½±åƒ',
                'pharmacy': 'è¯å­¦æ²»ç–—',
                'technology': 'å‰æ²¿æŠ€æœ¯',
                'ethics': 'ä¼¦ç†æ³•è§„',
                'education': 'ç»§ç»­æ•™è‚²'
            };
            return names[categoryId] || categoryId;
        }
        
        function formatNumber(num) {
            if (num >= 10000) {
                return (num / 10000).toFixed(1) + 'ä¸‡';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'k';
            }
            return num.toString();
        }
        
        function showTestResult(message) {
            const results = document.getElementById('test-results');
            const output = document.getElementById('test-output');
            
            results.style.display = 'block';
            output.innerHTML = message;
        }
    </script>
</body>
</html>