<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»„é‡‘çŸ¿å·¥ - Gold Miner Game</title>
    <meta name="description" content="ç»å…¸é»„é‡‘çŸ¿å·¥æ¸¸æˆ - æŒ–æ˜é»„é‡‘ï¼Œèµšå–è´¢å¯Œï¼">
    
    <!-- ç¤¾äº¤åª’ä½“åˆ†äº«ä¼˜åŒ– -->
    <meta property="og:title" content="é»„é‡‘çŸ¿å·¥ - Gold Miner Game">
    <meta property="og:description" content="ç»å…¸é»„é‡‘çŸ¿å·¥æ¸¸æˆï¼ŒæŒ–æ˜é»„é‡‘èµšå–è´¢å¯Œï¼">
    <meta property="og:type" content="website">
    
    <!-- PWAæ”¯æŒ -->
    <meta name="theme-color" content="#FFD700">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="é»„é‡‘çŸ¿å·¥">
    
    <!-- å›¾æ ‡ -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>â›ï¸</text></svg>">
    
    <style>
        /* åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(180deg, #87CEEB 0%, #DEB887 50%, #8B4513 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .game-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* æ¸¸æˆç•Œé¢ */
        .game-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(135deg, #2C3E50 0%, #34495E 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .score-info {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 2px;
        }

        .info-value {
            font-size: 18px;
            font-weight: bold;
            color: #FFD700;
        }

        .game-controls {
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: linear-gradient(135deg, #E74C3C 0%, #C0392B 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .control-btn.start {
            background: linear-gradient(135deg, #27AE60 0%, #229954 100%);
        }

        /* æ¸¸æˆç”»å¸ƒ */
        .game-canvas {
            position: absolute;
            top: 80px;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, #87CEEB 0%, #DEB887 30%, #8B4513 100%);
        }

        /* çŸ¿å·¥è§’è‰² */
        .miner {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: #8B4513;
            border-radius: 50% 50% 0 0;
            z-index: 50;
        }

        .miner::before {
            content: 'ğŸ‘¨â€ğŸ­';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
        }

        /* é’©å­å’Œç»³å­ */
        .hook-system {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 40;
        }

        .rope {
            width: 3px;
            background: #8B4513;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            transform-origin: top;
            transition: all 0.1s linear;
        }

        .hook {
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 15px;
            background: #C0C0C0;
            border-radius: 0 0 10px 10px;
        }

        .hook::after {
            content: 'ğŸª';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 16px;
        }

        /* å®ç‰©æ ·å¼ */
        .treasure {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 30;
        }

        .treasure:hover {
            transform: scale(1.1);
        }

        .treasure.gold {
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            border: 2px solid #B8860B;
        }

        .treasure.gold::before {
            content: 'ğŸ’°';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
        }

        .treasure.diamond {
            width: 25px;
            height: 25px;
            background: linear-gradient(45deg, #E0E0E0 0%, #FFFFFF 50%, #E0E0E0 100%);
            transform: rotate(45deg);
            border: 2px solid #C0C0C0;
        }

        .treasure.diamond::before {
            content: 'ğŸ’';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 16px;
        }

        .treasure.rock {
            width: 40px;
            height: 35px;
            background: radial-gradient(circle, #696969 0%, #2F4F4F 100%);
            border-radius: 40% 60% 60% 40%;
            border: 2px solid #2F2F2F;
        }

        .treasure.rock::before {
            content: 'ğŸª¨';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
        }

        /* æ¸¸æˆæ¶ˆæ¯ */
        .game-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            text-align: center;
            z-index: 200;
            display: none;
        }

        .game-message h2 {
            margin-bottom: 10px;
            color: #FFD700;
        }

        .game-message button {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700 0%, #FFA500 100%);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .game-header {
                height: 60px;
                padding: 0 10px;
            }

            .score-info {
                gap: 15px;
            }

            .info-value {
                font-size: 16px;
            }

            .control-btn {
                padding: 6px 12px;
                font-size: 12px;
            }

            .miner {
                width: 50px;
                height: 50px;
            }

            .miner::before {
                font-size: 32px;
            }
        }
    </style>
</head><body
>
    <div class="game-container">
        <!-- æ¸¸æˆå¤´éƒ¨ -->
        <div class="game-header">
            <div class="score-info">
                <div class="info-item">
                    <div class="info-label">åˆ†æ•°</div>
                    <div class="info-value" id="score">0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ç›®æ ‡</div>
                    <div class="info-value" id="target">1000</div>
                </div>
                <div class="info-item">
                    <div class="info-label">å…³å¡</div>
                    <div class="info-value" id="level">1</div>
                </div>
                <div class="info-item">
                    <div class="info-label">æ—¶é—´</div>
                    <div class="info-value" id="time">60</div>
                </div>
            </div>
            <div class="game-controls">
                <button class="control-btn start" id="start-btn" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
                <button class="control-btn" id="pause-btn" onclick="pauseGame()" disabled>æš‚åœ</button>
                <button class="control-btn" onclick="restartGame()">é‡æ–°å¼€å§‹</button>
            </div>
        </div>

        <!-- æ¸¸æˆç”»å¸ƒ -->
        <div class="game-canvas" id="game-canvas">
            <!-- çŸ¿å·¥ -->
            <div class="miner" id="miner"></div>
            
            <!-- é’©å­ç³»ç»Ÿ -->
            <div class="hook-system" id="hook-system">
                <div class="rope" id="rope" style="height: 0px;"></div>
                <div class="hook" id="hook"></div>
            </div>
        </div>

        <!-- è¿›åº¦æ¡ -->
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
            <div class="progress-text" id="progress-text">0 / 1000</div>
        </div>

        <!-- æ¸¸æˆæ¶ˆæ¯ -->
        <div class="game-message" id="game-message">
            <h2 id="message-title">æ¸¸æˆå¼€å§‹</h2>
            <p id="message-content">ç‚¹å‡»å±å¹•æˆ–æŒ‰ç©ºæ ¼é”®å‘å°„é’©å­ï¼</p>
            <button onclick="hideMessage()">ç¡®å®š</button>
        </div>
    </div>

    <script>
        // é»„é‡‘çŸ¿å·¥æ¸¸æˆç±»
        class GoldMinerGame {
            constructor() {
                this.canvas = document.getElementById('game-canvas');
                this.hookSystem = document.getElementById('hook-system');
                this.rope = document.getElementById('rope');
                this.hook = document.getElementById('hook');
                
                // æ¸¸æˆçŠ¶æ€
                this.isGameActive = false;
                this.isPaused = false;
                this.score = 0;
                this.level = 1;
                this.timeLeft = 60;
                this.target = 1000;
                
                // é’©å­çŠ¶æ€
                this.hookAngle = 0;
                this.hookDirection = 1; // 1 for right, -1 for left
                this.hookLength = 0;
                this.maxHookLength = 400;
                this.hookSpeed = 2;
                this.isHookMoving = false;
                this.isHookReturning = false;
                this.caughtTreasure = null;
                
                // å®ç‰©æ•°ç»„
                this.treasures = [];
                this.treasureTypes = [
                    { type: 'gold', value: 100, weight: 1, size: 30 },
                    { type: 'diamond', value: 300, weight: 0.5, size: 25 },
                    { type: 'rock', value: 10, weight: 3, size: 40 }
                ];
                
                // å®šæ—¶å™¨
                this.gameTimer = null;
                this.hookTimer = null;
                
                this.initializeGame();
            }
            
            initializeGame() {
                this.generateTreasures();
                this.setupEventListeners();
                this.updateUI();
            }
            
            setupEventListeners() {
                // é”®ç›˜äº‹ä»¶
                document.addEventListener('keydown', (e) => {
                    if (e.code === 'Space' && this.isGameActive && !this.isHookMoving) {
                        e.preventDefault();
                        this.launchHook();
                    }
                });
                
                // é¼ æ ‡/è§¦æ‘¸äº‹ä»¶
                this.canvas.addEventListener('click', () => {
                    if (this.isGameActive && !this.isHookMoving) {
                        this.launchHook();
                    }
                });
                
                // è§¦æ‘¸äº‹ä»¶
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    if (this.isGameActive && !this.isHookMoving) {
                        this.launchHook();
                    }
                });
            }
            
            generateTreasures() {
                this.treasures = [];
                const canvasRect = this.canvas.getBoundingClientRect();
                const canvasHeight = canvasRect.height;
                const canvasWidth = canvasRect.width;
                
                // ç”Ÿæˆä¸åŒç±»å‹çš„å®ç‰©
                const treasureCount = 15 + this.level * 2;
                
                for (let i = 0; i < treasureCount; i++) {
                    const treasureType = this.treasureTypes[Math.floor(Math.random() * this.treasureTypes.length)];
                    const treasure = {
                        ...treasureType,
                        id: `treasure-${i}`,
                        x: Math.random() * (canvasWidth - treasureType.size),
                        y: 150 + Math.random() * (canvasHeight - 200),
                        element: null
                    };
                    
                    this.createTreasureElement(treasure);
                    this.treasures.push(treasure);
                }
            }
            
            createTreasureElement(treasure) {
                const element = document.createElement('div');
                element.className = `treasure ${treasure.type}`;
                element.id = treasure.id;
                element.style.left = treasure.x + 'px';
                element.style.top = treasure.y + 'px';
                element.style.width = treasure.size + 'px';
                element.style.height = treasure.size + 'px';
                
                this.canvas.appendChild(element);
                treasure.element = element;
            }
            
            startGame() {
                this.isGameActive = true;
                this.isPaused = false;
                this.timeLeft = 60;
                
                // å¼€å§‹é’©å­æ‘†åŠ¨
                this.startHookSwing();
                
                // å¼€å§‹è®¡æ—¶
                this.gameTimer = setInterval(() => {
                    if (!this.isPaused) {
                        this.timeLeft--;
                        this.updateUI();
                        
                        if (this.timeLeft <= 0) {
                            this.endGame();
                        }
                    }
                }, 1000);
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                document.getElementById('start-btn').disabled = true;
                document.getElementById('pause-btn').disabled = false;
                
                this.showMessage('æ¸¸æˆå¼€å§‹ï¼', 'ç‚¹å‡»å±å¹•æˆ–æŒ‰ç©ºæ ¼é”®å‘å°„é’©å­æŒ–æ˜å®ç‰©ï¼');
            }
            
            startHookSwing() {
                const swing = () => {
                    if (!this.isGameActive || this.isPaused || this.isHookMoving) return;
                    
                    this.hookAngle += this.hookDirection * 2;
                    
                    if (this.hookAngle >= 45) {
                        this.hookDirection = -1;
                    } else if (this.hookAngle <= -45) {
                        this.hookDirection = 1;
                    }
                    
                    this.hookSystem.style.transform = `translateX(-50%) rotate(${this.hookAngle}deg)`;
                    
                    requestAnimationFrame(swing);
                };
                
                swing();
            }
            
            launchHook() {
                if (this.isHookMoving) return;
                
                this.isHookMoving = true;
                this.isHookReturning = false;
                this.hookLength = 0;
                
                const extendHook = () => {
                    if (!this.isGameActive || this.isPaused) return;
                    
                    if (!this.isHookReturning) {
                        this.hookLength += this.hookSpeed;
                        
                        // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°æœ€å¤§é•¿åº¦æˆ–ç¢°åˆ°å®ç‰©
                        if (this.hookLength >= this.maxHookLength || this.checkTreasureCollision()) {
                            this.isHookReturning = true;
                        }
                    } else {
                        // é’©å­è¿”å›
                        const returnSpeed = this.caughtTreasure ? 
                            this.hookSpeed / this.caughtTreasure.weight : this.hookSpeed * 2;
                        
                        this.hookLength -= returnSpeed;
                        
                        if (this.hookLength <= 0) {
                            this.hookLength = 0;
                            this.isHookMoving = false;
                            this.isHookReturning = false;
                            
                            // å¦‚æœæŠ“åˆ°å®ç‰©ï¼ŒåŠ åˆ†
                            if (this.caughtTreasure) {
                                this.score += this.caughtTreasure.value;
                                this.removeTreasure(this.caughtTreasure);
                                this.caughtTreasure = null;
                                this.updateUI();
                                this.checkLevelComplete();
                            }
                            
                            return;
                        }
                    }
                    
                    // æ›´æ–°é’©å­ä½ç½®
                    this.rope.style.height = this.hookLength + 'px';
                    
                    // å¦‚æœæŠ“åˆ°å®ç‰©ï¼Œç§»åŠ¨å®ç‰©
                    if (this.caughtTreasure) {
                        const hookRect = this.hook.getBoundingClientRect();
                        const canvasRect = this.canvas.getBoundingClientRect();
                        
                        this.caughtTreasure.element.style.left = 
                            (hookRect.left - canvasRect.left - this.caughtTreasure.size / 2) + 'px';
                        this.caughtTreasure.element.style.top = 
                            (hookRect.bottom - canvasRect.top) + 'px';
                    }
                    
                    requestAnimationFrame(extendHook);
                };
                
                extendHook();
            }
            
            checkTreasureCollision() {
                const hookRect = this.hook.getBoundingClientRect();
                const canvasRect = this.canvas.getBoundingClientRect();
                
                for (let treasure of this.treasures) {
                    if (!treasure.element) continue;
                    
                    const treasureRect = treasure.element.getBoundingClientRect();
                    
                    // ç®€å•çš„ç¢°æ’æ£€æµ‹
                    if (hookRect.left < treasureRect.right &&
                        hookRect.right > treasureRect.left &&
                        hookRect.top < treasureRect.bottom &&
                        hookRect.bottom > treasureRect.top) {
                        
                        this.caughtTreasure = treasure;
                        treasure.element.style.zIndex = '60';
                        return true;
                    }
                }
                
                return false;
            }
            
            removeTreasure(treasure) {
                if (treasure.element) {
                    treasure.element.remove();
                    treasure.element = null;
                }
                
                const index = this.treasures.indexOf(treasure);
                if (index > -1) {
                    this.treasures.splice(index, 1);
                }
            }
            
            checkLevelComplete() {
                if (this.score >= this.target) {
                    this.nextLevel();
                }
            }
            
            nextLevel() {
                this.level++;
                this.target = this.level * 1000;
                this.timeLeft += 30; // é¢å¤–æ—¶é—´
                
                // æ¸…é™¤ç°æœ‰å®ç‰©
                this.treasures.forEach(treasure => {
                    if (treasure.element) {
                        treasure.element.remove();
                    }
                });
                
                // ç”Ÿæˆæ–°å®ç‰©
                this.generateTreasures();
                this.updateUI();
                
                this.showMessage(`æ­å–œï¼è¿›å…¥ç¬¬${this.level}å…³ï¼`, `ç›®æ ‡åˆ†æ•°ï¼š${this.target}åˆ†`);
            }
            
            pauseGame() {
                this.isPaused = !this.isPaused;
                const pauseBtn = document.getElementById('pause-btn');
                pauseBtn.textContent = this.isPaused ? 'ç»§ç»­' : 'æš‚åœ';
                
                if (this.isPaused) {
                    this.showMessage('æ¸¸æˆæš‚åœ', 'ç‚¹å‡»ç»§ç»­æŒ‰é’®æ¢å¤æ¸¸æˆ');
                }
            }
            
            restartGame() {
                this.endGame();
                this.score = 0;
                this.level = 1;
                this.target = 1000;
                this.timeLeft = 60;
                
                // æ¸…é™¤æ‰€æœ‰å®ç‰©
                this.treasures.forEach(treasure => {
                    if (treasure.element) {
                        treasure.element.remove();
                    }
                });
                
                // é‡ç½®é’©å­
                this.hookLength = 0;
                this.hookAngle = 0;
                this.isHookMoving = false;
                this.isHookReturning = false;
                this.caughtTreasure = null;
                this.rope.style.height = '0px';
                this.hookSystem.style.transform = 'translateX(-50%) rotate(0deg)';
                
                // é‡æ–°ç”Ÿæˆå®ç‰©
                this.generateTreasures();
                this.updateUI();
                
                // é‡ç½®æŒ‰é’®çŠ¶æ€
                document.getElementById('start-btn').disabled = false;
                document.getElementById('pause-btn').disabled = true;
                document.getElementById('pause-btn').textContent = 'æš‚åœ';
            }
            
            endGame() {
                this.isGameActive = false;
                
                if (this.gameTimer) {
                    clearInterval(this.gameTimer);
                    this.gameTimer = null;
                }
                
                // é‡ç½®æŒ‰é’®çŠ¶æ€
                document.getElementById('start-btn').disabled = false;
                document.getElementById('pause-btn').disabled = true;
                
                const message = this.score >= this.target ? 
                    'æ­å–œé€šå…³ï¼' : 'æ—¶é—´åˆ°ï¼';
                const content = `æœ€ç»ˆåˆ†æ•°ï¼š${this.score}åˆ†`;
                
                this.showMessage(message, content);
            }
            
            updateUI() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('target').textContent = this.target;
                document.getElementById('level').textContent = this.level;
                document.getElementById('time').textContent = this.timeLeft;
                
                // æ›´æ–°è¿›åº¦æ¡
                const progress = Math.min((this.score / this.target) * 100, 100);
                document.getElementById('progress-fill').style.width = progress + '%';
                document.getElementById('progress-text').textContent = `${this.score} / ${this.target}`;
            }
            
            showMessage(title, content) {
                document.getElementById('message-title').textContent = title;
                document.getElementById('message-content').textContent = content;
                document.getElementById('game-message').style.display = 'block';
            }
        }

        // å…¨å±€æ¸¸æˆå®ä¾‹
        let game = null;

        // æ¸¸æˆæ§åˆ¶å‡½æ•°
        function startGame() {
            if (!game) {
                game = new GoldMinerGame();
            }
            game.startGame();
        }

        function pauseGame() {
            if (game) {
                game.pauseGame();
            }
        }

        function restartGame() {
            if (game) {
                game.restartGame();
            }
        }

        function hideMessage() {
            document.getElementById('game-message').style.display = 'none';
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é»„é‡‘çŸ¿å·¥æ¸¸æˆå·²åŠ è½½å®Œæˆï¼');
            
            // æ˜¾ç¤ºåˆå§‹æ¶ˆæ¯
            setTimeout(() => {
                document.getElementById('game-message').style.display = 'block';
            }, 500);
        });

        // é˜²æ­¢é¡µé¢æ»šåŠ¨
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false });
    </script>
</body>
</html>